{%if settings.dgHomeLink === true%}
    <nav class="navbar">
        <div class="navbar-inner">
            <a href="/" style="text-decoration: none;">
                <h1 style="margin: 15px !important;">{{meta.siteName}}</h1>
            </a>
            <button onclick="goBack()" class="back-button">â¬… Torna Indietro</button>
            <script>
            function goBack() {
                sessionStorage.setItem("scrollPosition", window.scrollY);
                history.back(); // Torna alla pagina precedente
            }
            </script>
        </div>
        {% if settings.dgEnableSearch === true%}
            {% include "components/searchButton.njk" %}
        {%endif%}
    </nav>
{%else%}
    <div class="empty-navbar">
        {% if settings.dgEnableSearch === true%}
            {% include "components/searchButton.njk" %}
        {%endif%}
    </div>
{%endif%}




<script>
document.addEventListener("DOMContentLoaded", function () {
    // ðŸ”¹ Salva la posizione dello scroll quando l'utente clicca su un link
    document.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", function (event) {
            let scrollY = window.scrollY; // Posizione verticale attuale
            sessionStorage.setItem("scrollPosition", scrollY);
        });
    });

    // ðŸ”¹ Controlla se esiste una posizione di scroll salvata e forza lo scroll
    if (sessionStorage.getItem("scrollPosition") !== null) {
        setTimeout(() => {
            let scrollToY = parseInt(sessionStorage.getItem("scrollPosition"), 10);
            console.log("Scrolling to:", scrollToY); // Debug per verificare
            window.scrollTo({ top: scrollToY, behavior: "instant" });
            sessionStorage.removeItem("scrollPosition"); // Rimuove la posizione dopo l'uso
        }, 50); // Ridotto il timeout per garantire il caricamento
    }
});

// ðŸ”¹ Funzione per tornare indietro e **forzare il ripristino dello scroll**
function goBack() {
    let scrollY = window.scrollY;
    sessionStorage.setItem("scrollPosition", scrollY);
    console.log("Saving scroll position:", scrollY); // Debug per verificare
    history.back();
}
</script>


