{%if settings.dgHomeLink === true%}
    <nav class="navbar">
        <div class="navbar-inner">
            <a href="/" style="text-decoration: none;">
                <h1 style="margin: 15px !important;">{{meta.siteName}}</h1>
            </a>
            <button onclick="goBack()" class="back-button">⬅ Torna Indietro</button>
            <script>
            function goBack() {
                sessionStorage.setItem("scrollPosition", window.scrollY);
                history.back(); // Torna alla pagina precedente
            }
            </script>
        </div>
        {% if settings.dgEnableSearch === true%}
            {% include "components/searchButton.njk" %}
        {%endif%}
    </nav>
{%else%}
    <div class="empty-navbar">
        {% if settings.dgEnableSearch === true%}
            {% include "components/searchButton.njk" %}
        {%endif%}
    </div>
{%endif%}

<script>
document.addEventListener("DOMContentLoaded", function () {
    // Funzione per salvare la posizione del link cliccato
    document.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", function (event) {
            sessionStorage.setItem("scrollPosition", event.target.getBoundingClientRect().top + window.scrollY);
        });
    });

    // Quando la pagina si carica, controlla se c'è una posizione salvata
    if (sessionStorage.getItem("scrollPosition") !== null) {
        setTimeout(() => {
            window.scrollTo({
                top: sessionStorage.getItem("scrollPosition"),
                behavior: "smooth"
            });
            sessionStorage.removeItem("scrollPosition"); // Rimuove la posizione dopo l'uso
        }, 200); // Aspetta 200ms per assicurarti che tutto sia caricato
    }
});

// Funzione per tornare indietro e mantenere lo scroll
function goBack() {
    sessionStorage.setItem("scrollPosition", window.scrollY);
    history.back();
}
</script>
